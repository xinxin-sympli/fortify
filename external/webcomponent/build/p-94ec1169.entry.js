import{r as t,h as n,H as i}from"./p-e5a4fcab.js";import{C as e}from"./p-ef89a217.js";import"./p-0b41cd3e.js";const o=function(t){return new Promise((n,i)=>{const e=new FileReader;e.onload=()=>n({value:e.result,fileName:t.name,fileSize:t.size,sourceMime:t.type}),e.onerror=()=>i(e.error),e.readAsBinaryString(t)})};function r(){return(r=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t}).apply(this,arguments)}function c(t){return"/"===t.charAt(0)}function a(t,n){for(var i=n,e=i+1,o=t.length;e<o;i+=1,e+=1)t[i]=t[e];t.pop()}function s(t,n,i,e){var o;"string"==typeof t?(o=function(t){var n=t||"/",i="",e="",o=n.indexOf("#");-1!==o&&(e=n.substr(o),n=n.substr(0,o));var r=n.indexOf("?");return-1!==r&&(i=n.substr(r),n=n.substr(0,r)),{pathname:n,search:"?"===i?"":i,hash:"#"===e?"":e}}(t)).state=n:(void 0===(o=r({},t)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==n&&void 0===o.state&&(o.state=n));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return i&&(o.key=i),e?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=function(t,n){void 0===n&&(n="");var i,e=t&&t.split("/")||[],o=n&&n.split("/")||[],r=t&&c(t),s=n&&c(n),u=r||s;if(t&&c(t)?o=e:e.length&&(o.pop(),o=o.concat(e)),!o.length)return"/";if(o.length){var f=o[o.length-1];i="."===f||".."===f||""===f}else i=!1;for(var l=0,d=o.length;d>=0;d--){var p=o[d];"."===p?a(o,d):".."===p?(a(o,d),l++):l&&(a(o,d),l--)}if(!u)for(;l--;l)o.unshift("..");!u||""===o[0]||o[0]&&c(o[0])||o.unshift("");var h=o.join("/");return i&&"/"!==h.substr(-1)&&(h+="/"),h}(o.pathname,e.pathname)):o.pathname=e.pathname:o.pathname||(o.pathname="/"),o}var u=!("undefined"==typeof window||!window.document||!window.document.createElement);function f(t,n){n(window.confirm(t))}function l(){try{return window.history.state||{}}catch(t){return{}}}const d=function(t){void 0===t&&(t={}),u||function(){throw new Error("Invariant failed")}();var n,i,e=window.history,o=(-1===(n=window.navigator.userAgent).indexOf("Android 2.")&&-1===n.indexOf("Android 4.0")||-1===n.indexOf("Mobile Safari")||-1!==n.indexOf("Chrome")||-1!==n.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,c=!(-1===window.navigator.userAgent.indexOf("Trident")),a=t.forceRefresh,d=void 0!==a&&a,p=t.getUserConfirmation,h=void 0===p?f:p,w=t.keyLength,v=void 0===w?6:w,y=t.basename?function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}("/"===(i=t.basename).charAt(0)?i:"/"+i):"";function b(t){var n=t||{},i=n.key,e=n.state,o=window.location,r=o.pathname+o.search+o.hash;return y&&(r=function(t,n){return function(t,n){return 0===t.toLowerCase().indexOf(n.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(n.length))}(t,n)?t.substr(n.length):t}(r,y)),s(r,e,i)}function m(){return Math.random().toString(36).substr(2,v)}var g,x,P=(g=null,x=[],{setPrompt:function(t){return g=t,function(){g===t&&(g=null)}},confirmTransitionTo:function(t,n,i,e){if(null!=g){var o="function"==typeof g?g(t,n):g;"string"==typeof o?"function"==typeof i?i(o,e):e(!0):e(!1!==o)}else e(!0)},appendListener:function(t){var n=!0;function i(){n&&t.apply(void 0,arguments)}return x.push(i),function(){n=!1,x=x.filter((function(t){return t!==i}))}},notifyListeners:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];x.forEach((function(t){return t.apply(void 0,n)}))}});function C(t){r(L,t),L.length=e.length,P.notifyListeners(L.location,L.action)}function k(t){(function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")})(t)||R(b(t.state))}function _(){R(b(l()))}var E=!1;function R(t){E?(E=!1,C()):P.confirmTransitionTo(t,"POP",h,(function(n){n?C({action:"POP",location:t}):function(t){var n=j.indexOf(L.location.key);-1===n&&(n=0);var i=j.indexOf(t.key);-1===i&&(i=0);var e=n-i;e&&(E=!0,U(e))}(t)}))}var O=b(l()),j=[O.key];function S(t){return y+function(t){var n=t.search,i=t.hash,e=t.pathname||"/";return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(e+="#"===i.charAt(0)?i:"#"+i),e}(t)}function U(t){e.go(t)}var I=0;function A(t){1===(I+=t)&&1===t?(window.addEventListener("popstate",k),c&&window.addEventListener("hashchange",_)):0===I&&(window.removeEventListener("popstate",k),c&&window.removeEventListener("hashchange",_))}var H=!1,L={length:e.length,action:"POP",location:O,createHref:S,push:function(t,n){var i=s(t,n,m(),L.location);P.confirmTransitionTo(i,"PUSH",h,(function(t){if(t){var n=S(i);if(o)if(e.pushState({key:i.key,state:i.state},null,n),d)window.location.href=n;else{var r=j.indexOf(L.location.key),c=j.slice(0,r+1);c.push(i.key),j=c,C({action:"PUSH",location:i})}else window.location.href=n}}))},replace:function(t,n){var i=s(t,n,m(),L.location);P.confirmTransitionTo(i,"REPLACE",h,(function(t){if(t){var n=S(i);if(o)if(e.replaceState({key:i.key,state:i.state},null,n),d)window.location.replace(n);else{var r=j.indexOf(L.location.key);-1!==r&&(j[r]=i.key),C({action:"REPLACE",location:i})}else window.location.replace(n)}}))},go:U,goBack:function(){U(-1)},goForward:function(){U(1)},block:function(t){void 0===t&&(t=!1);var n=P.setPrompt(t);return H||(A(1),H=!0),function(){return H&&(H=!1,A(-1)),n()}},listen:function(t){var n=P.appendListener(t);return A(1),function(){A(-1),n()}}};return L}(),p=Object.assign(d,{parseHash:function(t=window.location.hash){if(!t.length)return{};const n=t.replace(/^(#|\?)?\/?/,"").split("&"),i={};for(let o=0;o<n.length;o+=1){const t=n[o].split("=");try{i[t[0]]=t[1]&&decodeURIComponent(t[1])}catch(e){console.warn(e)}}return i},queryStringify:function(t){const n=[];return Object.keys(t).forEach(i=>{"string"!=typeof t[i]&&"boolean"!=typeof t[i]&&"number"!=typeof t[i]||n.push(`${i}=${encodeURIComponent(t[i])}`)}),n.join("&")}}),h=class{constructor(n){t(this,n),this.onClickDecode=()=>{const{value:t}=this.inputPaste;t&&this.decode(t)},this.onClickExample=()=>{this.decode(this.certificateExample)},this.onClickClear=()=>{this.clear()},this.onChangeInputFile=async t=>{const n=t.target;if(n.files){const t=await o(n.files[0]);"string"==typeof t.value&&this.decode(t.value),n.value=""}},this.onDropFile=async t=>{t.stopPropagation(),t.preventDefault();const n=t.dataTransfer;if(n.files){const t=await o(n.files[0]);"string"==typeof t.value&&this.decode(t.value)}}}componentDidLoad(){const t=p.parseHash(window.location.search);t.cert&&setTimeout(()=>this.decode(t.cert),100)}clear(){this.inputPaste.value="",this.certificateDecoded=null,p.replace({search:""})}decode(t){try{const n=new e(t,void 0,!0);this.certificateDecoded=n,this.inputPaste.value=n.pem,p.replace({search:p.queryStringify({cert:n.base64})})}catch(n){this.certificateDecoded=null,console.error(n),alert("Error decoding certificate. Please use another file")}}render(){return n(i,null,n("textarea",{placeholder:"Certificate DER or PEM",class:"input_paste peculiar_fill_light peculiar_stroke_grey_3 peculiar_color_dark",ref:t=>this.inputPaste=t,onDrop:this.onDropFile}),n("div",{class:"controls"},n("peculiar-button",{fill:"fill",class:"button",onClick:this.onClickDecode},"Decode"),n("peculiar-button",{class:"button"},"Choose file",n("input",{type:"file",class:"input_file",accept:"application/pkix-cert,application/x-x509-ca-cert,application/x-x509-user-cert",onChange:this.onChangeInputFile,value:""})),n("peculiar-button",{class:"button",onClick:this.onClickClear},"Clear"),this.certificateExample&&n("peculiar-button",{class:"button",onClick:this.onClickExample},"Example")),this.certificateDecoded&&n("peculiar-certificate-viewer",{certificate:this.certificateDecoded,class:"viewer",download:!0}))}};h.style=".sc-peculiar-certificate-decoder-h{display:block;width:100%;font-size:0}.input_paste.sc-peculiar-certificate-decoder{min-height:300px;width:100%;border-radius:3px;border-width:1px;border-style:solid;padding:14px;font-size:14px;font-family:monospace;resize:vertical}.controls.sc-peculiar-certificate-decoder{margin-top:10px}.button.sc-peculiar-certificate-decoder:not(:first-child){margin-left:10px}.viewer.sc-peculiar-certificate-decoder{margin-top:64px}.input_file.sc-peculiar-certificate-decoder{opacity:0;width:100%;height:100%;top:0;left:0;display:block;position:absolute}";export{h as peculiar_certificate_decoder}